(function() {
  const e = document.querySelectorAll('.anim');
  e.forEach(anim => {
    anim.classList.add('loaded');
  });
  const menu = document.querySelector('.toggle-menu');
  const body = document.querySelector('body');
  const siteMenu = document.querySelector('nav.site-menu');

  menu.addEventListener('click', () => {
    if (!siteMenu.hasAttribute('style')) {
      siteMenu.setAttribute('style', 'display: block;');
      if (siteMenu.classList.contains('site-menu-close')) {
        siteMenu.classList.remove('site-menu-close');
      }
      siteMenu.classList.add('site-menu-open');
      menu.classList.add('active', 'animate');
      body.classList.add('mobile-menu--active');
      setTimeout(function() {
        menu.classList.remove('animate');
        menu.classList.add('animate-end');
      }, 400);
    } else if (siteMenu.hasAttribute('style')) {
      body.classList.remove('mobile-menu--active');
      siteMenu.removeAttribute('style');
      menu.classList.remove('active', 'animate-end');
      menu.classList.add('animate-reverse');
      setTimeout(function() {
        menu.classList.remove('animate-reverse');
      }, 400);
      siteMenu.classList.add('site-menu-close');
    }
  });
})();
